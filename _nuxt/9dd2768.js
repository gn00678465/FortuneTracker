(window.webpackJsonp=window.webpackJsonp||[]).push([[5],{238:function(e,t,n){"use strict";n.r(t);n(68),n(106),n(69),n(73),n(158);var r=n(101),o={data:function(){return{radio:"expense",category:"food"}},computed:{expenseCategories:function(){return this.$store.getters["firebase/expenseCategories"]},expenseSubcategories:function(){var e=this;return this.expenseCategories?this.expenseCategories.filter((function(t){return t.id===e.category}))[0].subcategories:[]},icomeCategories:function(){return this.$store.getters["firebase/incomeCategories"]},originalData:function(){return this.$store.state.firebase.allRangeData||[]},chartSeries:function(){return Object.values(this["".concat(this.radio,"Sort")])},expenseSort:function(){var e=this;return this.originalData.filter((function(data){return data.isExpense&&data.category===e.category})).reduce((function(t,n){var r=e.nameMap(e.expenseSubcategories,n.subcategory);return r in t?t[r]+=n.price:t[r]=n.price,t}),{})},incomeSort:function(){var e=this;return this.originalData.filter((function(data){return!data.isExpense})).reduce((function(t,n){var r=e.nameMap(e.icomeCategories,n.category);return r in t?t[r]+=n.price:t[r]=n.price,t}),{})},sum:function(){return this.chartSeries.reduce((function(e,t){return e+t}),0)},chartOptions:function(){var e=Object.keys(this["".concat(this.radio,"Sort")]);return 0===e.length?{noData:{text:"無相關資料",style:{color:"#fff",fontSize:"24px"}}}:{chart:{width:380,type:"pie"},labels:e,responsive:[{breakpoint:480,options:{chart:{width:200},legend:{position:"bottom"}}}],legend:{labels:{colors:"#fff"}}}}},methods:{nameMap:function(e,t){if(0!==e.length)return e.filter((function(e){return e.id===t}))[0].name},toCurrency:function(e){return Object(r.a)(e)}}},c=n(30),component=Object(c.a)(o,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("ul",{staticClass:"flex mb-4"},[n("li",{staticClass:"flex-grow text-right"},[n("label",{staticClass:"inline-block w-3/4 py-1 px-3 border border-solid border-primary rounded-l-full text-center",class:"expense"===e.radio?"bg-primary text-black":"text-white cursor-pointer",attrs:{for:"expense"}},[e._v("支出圓餅圖")]),e._v(" "),n("input",{directives:[{name:"model",rawName:"v-model",value:e.radio,expression:"radio"}],staticClass:"hidden",attrs:{id:"expense",value:"expense",type:"radio"},domProps:{checked:e._q(e.radio,"expense")},on:{change:function(t){e.radio="expense"}}})]),e._v(" "),n("li",{staticClass:"flex-grow"},[n("label",{staticClass:"inline-block w-3/4 py-1 px-3 border border-solid border-primary rounded-r-full text-center",class:"income"===e.radio?"bg-primary text-black":"text-white cursor-pointer",attrs:{for:"income"}},[e._v("收入圓餅圖")]),e._v(" "),n("input",{directives:[{name:"model",rawName:"v-model",value:e.radio,expression:"radio"}],staticClass:"hidden",attrs:{id:"income",value:"income",type:"radio"},domProps:{checked:e._q(e.radio,"income")},on:{change:function(t){e.radio="income"}}})])]),e._v(" "),"expense"===e.radio?n("div",{staticClass:"text-center mb-2"},[n("select",{directives:[{name:"model",rawName:"v-model",value:e.category,expression:"category"}],staticClass:"w-4/5 bg-secondary p-2 text-white border border-solid border-white rounded-md",attrs:{id:"category"},on:{change:function(t){var n=Array.prototype.filter.call(t.target.options,(function(e){return e.selected})).map((function(e){return"_value"in e?e._value:e.value}));e.category=t.target.multiple?n:n[0]}}},e._l(e.expenseCategories,(function(t){return n("option",{key:t.id,domProps:{value:t.id}},[e._v("\n        "+e._s(t.name)+"\n      ")])})),0)]):e._e(),e._v(" "),n("client-only",[n("Apexchart",{key:Date.now(),attrs:{type:"pie",width:"380",options:e.chartOptions,series:e.chartSeries}})],1),e._v(" "),n("p",{staticClass:"text-primary flex justify-between items-center text-2xl mb-2"},[n("span",[e._v("總計：")]),e._v(" "),n("span",[e._v("TWD $"+e._s(e.toCurrency(e.sum)))])]),e._v(" "),"expense"===e.radio?n("ul",e._l(e.expenseSort,(function(t,r){return n("li",{key:r,staticClass:"text-white text-xl text-right mb-1"},[n("span",[e._v(e._s(r))]),n("span",{staticClass:"w-1/3 inline-block"},[e._v(e._s(e.toCurrency(t)))])])})),0):n("ul",e._l(e.incomeSort,(function(t,r){return n("li",{key:r,staticClass:"text-white text-xl text-right mb-1"},[n("span",[e._v(e._s(r))]),n("span",{staticClass:"w-1/3 inline-block"},[e._v(e._s(e.toCurrency(t)))])])})),0)],1)}),[],!1,null,null,null);t.default=component.exports},245:function(e,t,n){"use strict";n.r(t);n(31);var r={methods:{changeMonth:function(e){var t=this,n=e?"add":"subtract",r=this.$store.state.firebase.currentDateRange.map((function(e){return t.$moment.unix(e)[n](1,"months").unix()}));this.$store.commit("firebase/SET_CURRENTDATERANGE",r),this.$store.dispatch("firebase/getRangeData")},unixTime2str:function(e){return this.$moment.unix(e).format("YYYY-MM")}}},o=n(30),component=Object(o.a)(r,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("div",{staticClass:"flex justify-between items-center text-white -mx-2"},[n("button",{staticClass:"material-icons p-2 focus:outline-none active:outline-none",on:{click:function(t){return e.changeMonth(!1)}}},[e._v("\n      chevron_left\n    ")]),e._v(" "),n("p",{staticClass:"font-medium"},[e._v("\n      "+e._s(e.unixTime2str(e.$store.state.firebase.currentDateRange[0]))+"\n    ")]),e._v(" "),n("button",{staticClass:"material-icons p-2 focus:outline-none active:outline-none",on:{click:function(t){return e.changeMonth(!0)}}},[e._v("\n      chevron_right\n    ")])]),e._v(" "),n("ChartPie")],1)}),[],!1,null,null,null);t.default=component.exports;installComponents(component,{ChartPie:n(238).default})}}]);